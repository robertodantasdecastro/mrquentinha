import Link from "next/link";
import { StatusPill, type StatusTone } from "@mrquentinha/ui";

import { AdminSessionGate } from "@/components/AdminSessionGate";
import { ADMIN_MODULES, resolveModuleCardBorder, resolveModuleStatusTone } from "@/lib/adminModules";

function resolveHealthTone(status: string): StatusTone {
  const normalizedStatus = status.toLowerCase();

  if (normalizedStatus.includes("ok") || normalizedStatus.includes("online")) {
    return "success";
  }

  return "danger";
}

export function AdminFoundation() {\n  return (\n    <AdminSessionGate>\n      {({ healthStatus }) => (\n        <div className=\"space-y-6\">\n          <section id=\"dashboard\" className=\"rounded-2xl border border-border bg-surface/80 p-6 shadow-sm\">\n            <p className=\"text-xs font-semibold uppercase tracking-[0.18em] text-primary\">Etapa 9.1.2</p>\n            <h1 className=\"mt-1 text-2xl font-bold text-text\">Admin Web - Relatorios e UX/IX</h1>\n            <p className=\"mt-3 text-sm text-muted\">\n              Hotpages por modulo, relatorios integrados e visao de fluxo de caixa global com exportacao CSV.\n            </p>\n            <div className=\"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-5\">\n              <article className=\"rounded-xl border border-border bg-bg p-4 text-sm\">\n                <p className=\"text-xs font-semibold uppercase tracking-[0.08em] text-muted\">API backend</p>\n                <StatusPill tone={resolveHealthTone(healthStatus)} className=\"mt-2\">\n                  {healthStatus}\n                </StatusPill>\n              </article>\n              <article className=\"rounded-xl border border-border bg-bg p-4 text-sm\">\n                <p className=\"text-xs font-semibold uppercase tracking-[0.08em] text-muted\">Modulos ativos</p>\n                <p className=\"mt-2 text-lg font-semibold text-text\">{ADMIN_MODULES.length}</p>\n              </article>\n              <article className=\"rounded-xl border border-border bg-bg p-4 text-sm\">\n                <p className=\"text-xs font-semibold uppercase tracking-[0.08em] text-muted\">Foco atual</p>\n                <p className=\"mt-2 text-lg font-semibold text-text\">Relatorios + UX/IX</p>\n              </article>\n              <article className=\"rounded-xl border border-border bg-bg p-4 text-sm\">\n                <p className=\"text-xs font-semibold uppercase tracking-[0.08em] text-muted\">Exportacao</p>\n                <p className=\"mt-2 text-lg font-semibold text-text\">CSV</p>\n              </article>\n              <article className=\"rounded-xl border border-border bg-bg p-4 text-sm\">\n                <p className=\"text-xs font-semibold uppercase tracking-[0.08em] text-muted\">Proxima entrega</p>\n                <p className=\"mt-2 text-lg font-semibold text-text\">T9.1.2</p>\n              </article>\n            </div>\n          </section>\n\n          <section className=\"rounded-2xl border border-border bg-surface/80 p-6 shadow-sm\">\n            <h2 className=\"text-xl font-semibold text-text\">Modulos e status</h2>\n            <p className=\"mt-2 text-sm text-muted\">\n              Acesse cada hotpage para operar o modulo com menu contextual e relatorios integrados.\n            </p>\n            <div className=\"mt-4 grid gap-3 md:grid-cols-2\">\n              {ADMIN_MODULES.map((moduleItem) => (\n                <Link\n                  key={moduleItem.slug}\n                  href={moduleItem.path}\n                  className={`block rounded-xl border bg-bg p-4 transition hover:border-primary ${resolveModuleCardBorder(moduleItem.status)}`}\n                >\n                  <p className=\"text-xs font-semibold uppercase tracking-[0.08em] text-primary\">\n                    {moduleItem.stage}\n                  </p>\n                  <h3 className=\"mt-1 text-base font-semibold text-text\">{moduleItem.title}</h3>\n                  <p className=\"mt-2 text-sm text-muted\">{moduleItem.description}</p>\n                  <div className=\"mt-2\">\n                    <StatusPill tone={resolveModuleStatusTone(moduleItem.status)}>\n                      {moduleItem.status}\n                    </StatusPill>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          </section>\n\n          <section className=\"rounded-2xl border border-border bg-surface/80 p-6 shadow-sm\">\n            <div className=\"flex flex-wrap items-center justify-between gap-3\">\n              <div>\n                <h2 className=\"text-xl font-semibold text-text\">Acesso rapido</h2>\n                <p className=\"mt-1 text-sm text-muted\">\n                  Entradas diretas para operacao, relatorios e exportacao.\n                </p>\n              </div>\n              <Link\n                href=\"/modulos/relatorios\"\n                className=\"rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-primary/90\"\n              >\n                Abrir relatorios\n              </Link>\n            </div>\n            <div className=\"mt-4 flex flex-wrap gap-2\">\n              {ADMIN_MODULES.map((moduleItem) => (\n                <Link\n                  key={moduleItem.slug}\n                  href={moduleItem.path}\n                  className=\"rounded-full border border-border bg-bg px-3 py-1 text-xs font-semibold uppercase tracking-[0.08em] text-text transition hover:border-primary hover:text-primary\"\n                >\n                  {moduleItem.title}\n                </Link>\n              ))}\n            </div>\n          </section>\n        </div>\n      )}\n    </AdminSessionGate>\n  );\n}\n*** End Patch"}ðŸ™ }")
